<!DOCTYPE html>
<html lang="en" data-theme="synthwave">

<head>
  
  <title>

Choreographer Design Documentation | Queen Of Squiggles&#x27;s Blog

</title>
  <meta charset="utf-8" />
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
    integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" />

  
  <link rel="me" href="https:&#x2F;&#x2F;blobfox.coffee&#x2F;@queenofsquiggles">
  

  <!-- Tailwind compiled CSS -->
  <link rel="stylesheet" href="https://queenofsquiggles.github.io/output.css">
  <script src="https://cdn.jsdelivr.net/npm/theme-change@2.0.2/index.js"></script>

  
  <script defer src="https://queenofsquiggles.github.io/elasticlunr.min.js"></script>
  <script defer src="https://queenofsquiggles.github.io/search_index.en.js"></script>
  <script src="https://queenofsquiggles.github.io/js/search.js"></script>
  

  
  
  <!-- Includes the default RSS feed if enabled in configuration -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="https://queenofsquiggles.github.io/rss.xml">
  
  
  <!-- Includes the ddefault Atom feed if enabled in configuration -->
  <link rel="alternate" type="application/atom+xml" title="Atom" href="https://queenofsquiggles.github.io/atom.xml" />
  

  
  
</head>

<body>
  <div class="navbar bg-base-200 sticky top-0 z-50">
    <div class="navbar-center lg:navbar-start">
      <div class="hidden lg:flex">
        <a class="btn btn-ghost text-xl" href="https:&#x2F;&#x2F;queenofsquiggles.github.io&#x2F;">Queen Of Squiggles&#x27;s Blog</a>
      </div>

      <!-- small screen navbar (drop down) -->
      <div class="dropdown">
        <div tabindex="0" role="button" class="btn btn-ghost lg:hidden">
          Queen Of Squiggles&#x27;s Blog

        </div>
        <ul tabindex="0" class="menu menu-sm dropdown-content bg-base-300 rounded-box z-[1] mt-3 w-52 p-2 shadow gap-4">
          <li>
            <a href="https:&#x2F;&#x2F;queenofsquiggles.github.io&#x2F;">Home</a>
          </li>
          
          <li>
            <a href="https:&#x2F;&#x2F;queenofsquiggles.github.io&#x2F;tags">Tags</a>
          </li>
          
          <li>
            <a href="https:&#x2F;&#x2F;queenofsquiggles.github.io&#x2F;about">About</a>
          </li>
          
          

          <li class="dropdown">
            <details>
              <summary>Theme</summary>

              <ul tabindex="0" class="dropdown-content bg-base-300 rounded-box z-[1] w-52 p-2 shadow-2xl">
                
                <li>
                  <input type="radio" name="theme-dropdown" class="theme-controller btn btn-ghost"
                    aria-label="light" value="light" />
                </li>
                
                <li>
                  <input type="radio" name="theme-dropdown" class="theme-controller btn btn-ghost"
                    aria-label="dark" value="dark" />
                </li>
                
                <li>
                  <input type="radio" name="theme-dropdown" class="theme-controller btn btn-ghost"
                    aria-label="synthwave" value="synthwave" />
                </li>
                

              </ul>
            </details>
          </li>
          
        </ul>
      </div>
    </div>
    <!-- large screen navbar -->
    <div class="navbar-center hidden lg:flex">
      <ul class="menu menu-horizontal px-1">
        
        <li>
          <a href="https:&#x2F;&#x2F;queenofsquiggles.github.io&#x2F;tags">Tags</a>
        </li>
        
        <li>
          <a href="https:&#x2F;&#x2F;queenofsquiggles.github.io&#x2F;about">About</a>
        </li>
        
      </ul>
      

      <div class="flex-1 gap-2">
        <div class="dropdown">
          <div tabindex="0" role="button" class="btn btn-ghost">
            Theme
          </div>
          <ul tabindex="0" class="dropdown-content bg-base-300 rounded-box z-[1] w-52 p-2 shadow-2xl">
            
            <li>
              <input type="radio" name="theme-dropdown"
                class="theme-controller btn btn-sm btn-block btn-ghost justify-start" aria-label="light"
                value="light" />
            </li>
            
            <li>
              <input type="radio" name="theme-dropdown"
                class="theme-controller btn btn-sm btn-block btn-ghost justify-start" aria-label="dark"
                value="dark" />
            </li>
            
            <li>
              <input type="radio" name="theme-dropdown"
                class="theme-controller btn btn-sm btn-block btn-ghost justify-start" aria-label="synthwave"
                value="synthwave" />
            </li>
            

          </ul>
        </div>
      </div>
      
    </div>

    
    <div class="navbar-end hidden lg:flex">
      <form class="form-control lg:focus-within:grow" onsubmit="return goSearch(event)">
        <input type="text" class="input input-bordered" placeholder="Search" />
      </form>
    </div>
    
  </div>

  
  <div class="navbar flex justify-center lg:hidden pb-4">
    <form class="form-control" onsubmit="return goSearch(event)">
      <input type="text" class="input input-bordered" placeholder="Search" />
    </form>
  </div>
  

  <main class="flex flex-col container mx-auto justify-center my-2">
    
<div class="flex flex-row flex-wrap lg:flex-nowrap w-full justify-center gap-1 py-2">
  <div class=" hero container mx-auto bg-base-200 rounded-box">
    <div class="hero-content flex-col lg:flex-col">
      
      <div>
        <h1 class="text-5xl font-bold"> Choreographer Design Documentation </h1>
        <div class="py-6">
          
          <div class="flex flex-row flex-wrap gap-4  py-2">
            
            <a href="https://queenofsquiggles.github.io/tags/godot/" class="btn btn-secondary rounded-box">
              godot
            </a>
            
            <a href="https://queenofsquiggles.github.io/tags/reference/" class="btn btn-secondary rounded-box">
              reference
            </a>
            
          </div>
          
          

          
          <div class="join join-vertical py-2">

            <div class="btn btn-outline rounded-box no-animation join-item leading-relaxed">Written - 
Saturday the  9 of December, 2023
</div>

            



            

          </div>
          <div class="py-2">
            <i> Read time is about 10 minutes </i>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="container mx-auto max-w-md">
    

<!-- Table of contents supporting h1, h2, h3, h4, h5, h6 (or optionally reduced depth based on config) -->


<ul class="not-prose flex menu bg-base-200 rounded-box divide-y divide-dotted md:divide-none">
    <li class="menu-title text-xl">
        <h1>
            Table of Contents
        </h1>
    </li>
    
    <li>
        <a href="https://queenofsquiggles.github.io/tech/choreographer-design/#Blog_Post_Note">Blog Post Note</a>
    </li>
    
        
    <li>
        <a href="https://queenofsquiggles.github.io/tech/choreographer-design/#Choreographer">Choreographer</a>
    </li>
    
    <li>
        <ul class="divide-y divide-dotted md:divide-none">
            
            <li>

                <a href="https://queenofsquiggles.github.io/tech/choreographer-design/#User_Groups">
                    User Groups
                </a>
            </li>
            
            <li>
                <ul class="divide-y divide-dotted md:divide-none">
                    
                    <li>
                        <a href="https://queenofsquiggles.github.io/tech/choreographer-design/#Game_Developers">
                            Game Developers
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://queenofsquiggles.github.io/tech/choreographer-design/#Tooling_Developers">
                            Tooling Developers
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://queenofsquiggles.github.io/tech/choreographer-design/#Team_Collaboration_/_Professional_Development">
                            Team Collaboration &#x2F; Professional Development
                        </a>
                    </li>
                    
                    
                </ul>
            </li>
            
            
        </ul>
        
        
    <li>
        <a href="https://queenofsquiggles.github.io/tech/choreographer-design/#Language_Specification">Language Specification</a>
    </li>
    
    <li>
        <ul class="divide-y divide-dotted md:divide-none">
            
            <li>

                <a href="https://queenofsquiggles.github.io/tech/choreographer-design/#Definitions">
                    Definitions
                </a>
            </li>
            
            
            <li>

                <a href="https://queenofsquiggles.github.io/tech/choreographer-design/#Graph_Systems_Review_(Mathematical)">
                    Graph Systems Review (Mathematical)
                </a>
            </li>
            
            
            <li>

                <a href="https://queenofsquiggles.github.io/tech/choreographer-design/#Event_Systems">
                    Event Systems
                </a>
            </li>
            
            <li>
                <ul class="divide-y divide-dotted md:divide-none">
                    
                    <li>
                        <a href="https://queenofsquiggles.github.io/tech/choreographer-design/#Event_Connection">
                            Event Connection
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://queenofsquiggles.github.io/tech/choreographer-design/#Value_Connection">
                            Value Connection
                        </a>
                    </li>
                    
                    
                </ul>
            </li>
            
            
            <li>

                <a href="https://queenofsquiggles.github.io/tech/choreographer-design/#Block_Definitions">
                    Block Definitions
                </a>
            </li>
            
            
            <li>

                <a href="https://queenofsquiggles.github.io/tech/choreographer-design/#Core_Library">
                    Core Library
                </a>
            </li>
            
            
            <li>

                <a href="https://queenofsquiggles.github.io/tech/choreographer-design/#Third_Party_Libraries">
                    Third Party Libraries
                </a>
            </li>
            
            <li>
                <ul class="divide-y divide-dotted md:divide-none">
                    
                    <li>
                        <a href="https://queenofsquiggles.github.io/tech/choreographer-design/#How_Third_Party_Block_Definitions_work_internally">
                            How Third Party Block Definitions work internally
                        </a>
                    </li>
                    
                    
                </ul>
            </li>
            
            
        </ul>
        
        
    <li>
        <a href="https://queenofsquiggles.github.io/tech/choreographer-design/#Virtual_Heap_Memory">Virtual Heap Memory</a>
    </li>
    
    <li>
        <ul class="divide-y divide-dotted md:divide-none">
            
            <li>

                <a href="https://queenofsquiggles.github.io/tech/choreographer-design/#How_do_individual_blocks_interact_with_the_virtual_heap?">
                    How do individual blocks interact with the virtual heap?
                </a>
            </li>
            
            
        </ul>
        
        
    <li>
        <a href="https://queenofsquiggles.github.io/tech/choreographer-design/#Choreographer_Scripting_Interface_(CSI)">Choreographer Scripting Interface (CSI)</a>
    </li>
    
    <li>
        <ul class="divide-y divide-dotted md:divide-none">
            
            <li>

                <a href="https://queenofsquiggles.github.io/tech/choreographer-design/#The_.c11r_format">
                    The .c11r format
                </a>
            </li>
            
            <li>
                <ul class="divide-y divide-dotted md:divide-none">
                    
                    <li>
                        <a href="https://queenofsquiggles.github.io/tech/choreographer-design/#Example_.c11r_data/schema">
                            Example .c11r data&#x2F;schema
                        </a>
                    </li>
                    
                    
                </ul>
            </li>
            
            
        </ul>
        
        
    <li>
        <a href="https://queenofsquiggles.github.io/tech/choreographer-design/#Testing_Challenges">Testing Challenges</a>
    </li>
    
        
    <li>
        <a href="https://queenofsquiggles.github.io/tech/choreographer-design/#Continuation_of_documentation">Continuation of documentation</a>
    </li>
    
        
</ul>
</li>
</ul>



  </div>

</div>

<div class="static">
  <div class="fixed bottom-4 md:bottom-8 start-4 md:start-8 ">
    <div class="tooltip" data-tip="Return to top">
      <a class="btn bg-neutral aspect-square rounded-full shadow-md" href="#">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">
          <!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
          <path fill="#FFFFFF"
            d="M32 448c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c53 0 96-43 96-96l0-306.7 73.4 73.4c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 109.3 160 416c0 17.7-14.3 32-32 32l-96 0z" />
        </svg>
      </a>
    </div>
  </div>
</div>

<div class="flex flex-col justify-center">
  <article
    class="prose prose-neutral lg:prose-xl px-2 max-w-none prose-blockquote:rounded-r-lg prose-blockquote:shadow-2xl prose-blockquote:bg-base-200 prose-blockquote:p-2">
    <h2 id="Blog_Post_Note"><a class="zola-anchor" href="#Blog_Post_Note" aria-label="Anchor link for: Blog_Post_Note">Blog Post Note</a></h2>
<blockquote>
<p><strong>Update (August 24th, 2024)</strong>: This effort/project has since been abandoned. However anyone wishing to take this idea further is quite welcome to!</p>
</blockquote>
<p>Hey, this is the same markdown that is in the choreographer git repository. And one is significantly more likely to be updated. This is the version that was initially uploaded on December 19th, 2023. If you are from the future reading this, it is entirely possible the design has changed by some amount to accommodate changes in our reality. Otherwise please enjoy my mess :3</p>
<blockquote>
<p><strong>Preface:</strong> For simplicity, this document is written in present tense for specific end-goals and in future tense for possible but unlikely goals. This project could be considered to be “complete” once all present tense declarations are true.</p>
</blockquote>
<h2 id="Choreographer"><a class="zola-anchor" href="#Choreographer" aria-label="Anchor link for: Choreographer">Choreographer</a></h2>
<p>Choreographer (C11R) is a GDExtension based scripting language for Godot 4.2+.</p>
<p>Similar to Unreal Engine’s Blueprints system, it uses a Node-Graph Event system to manage code paths. Where an Event is equivalent to a “method” or “function” and is not necessarily related to Events in the context of an Observer Pattern.</p>
<h3 id="User_Groups"><a class="zola-anchor" href="#User_Groups" aria-label="Anchor link for: User_Groups">User Groups</a></h3>
<p>There are three core user groups of interest for Choreographer:</p>
<ul>
<li>Game developers</li>
<li>Tooling Developers</li>
<li>Team Collaboration</li>
</ul>
<h4 id="Game_Developers"><a class="zola-anchor" href="#Game_Developers" aria-label="Anchor link for: Game_Developers">Game Developers</a></h4>
<p>Game developers are (usually) less concerned with what they use to make a game and more concerned with actually finishing and releasing their game. To that end, Choreographer is intended to be highly usable for increasing efficacy of development as well as lowering the barrier to entry for developers who may not have experience with traditional programming languages.</p>
<h4 id="Tooling_Developers"><a class="zola-anchor" href="#Tooling_Developers" aria-label="Anchor link for: Tooling_Developers">Tooling Developers</a></h4>
<p>Tooling developers enjoy creating tools for Game Developers to use. They enjoy clean and documented systems which allow them to create interesting resources with minimal effort. Tooling developers are more likely to contribute back to the source project if they deem it worthy and/or interesting.
In order to serve tools developers, as well as to leverage their skills, Choreographer provides a simple “Block” registration system which allows custom logic blocks to be registered from a plugin and can be used from within the Choreographer Scripting Interface</p>
<h4 id="Team_Collaboration_/_Professional_Development"><a class="zola-anchor" href="#Team_Collaboration_&#x2F;_Professional_Development" aria-label="Anchor link for: Team_Collaboration_&#x2F;_Professional_Development">Team Collaboration / Professional Development</a></h4>
<p>Teams, both for smaller ventures like game jams and larger ventures like a complete game company, require specific features that may not necessarily be needed for individuals. For example teams will benefit from being able to leverage Version Control Systems such as git to collaborate more effectively. Additionally, teams are typically comprised of people with a diversity of skills and experience. In order to best leverage their unique skills and talents, they need to be able to leverage each other in mutually beneficial ways.</p>
<p>In order to best serve teams and professional groups, Choreographer uses a text-based (XML) file format, which allows easily readable files which can ease aches and pains from merge conflicts.
Additionally, the same feature which allows tooling developers to register custom logic blocks allows individual team members to provide logic blocks internally to their own team. And those highly specialized logic blocks can be used to increase the efficiency and ease of development for all team members.</p>
<h2 id="Language_Specification"><a class="zola-anchor" href="#Language_Specification" aria-label="Anchor link for: Language_Specification">Language Specification</a></h2>
<h3 id="Definitions"><a class="zola-anchor" href="#Definitions" aria-label="Anchor link for: Definitions">Definitions</a></h3>
<p>“Script” - a single file and class of Choreographer.
“Block” - a single node in the graph of a script.
“Event” - a method contained in a C11R Script comprised of a directed acyclic graph of Blocks.
“Connection” - a relationship between two Blocks marked by a line
“Emit”/“Emitting” - refers to a situation where the connection is on the right side of the block meaning it is an output
“Receive”/“Receiving” - refers to a situation where the connection is on the left side of the block meaning it is an input</p>
<h3 id="Graph_Systems_Review_(Mathematical)"><a class="zola-anchor" href="#Graph_Systems_Review_(Mathematical)" aria-label="Anchor link for: Graph_Systems_Review_(Mathematical)">Graph Systems Review (Mathematical)</a></h3>
<p>The graphs in Choreographer are “directed acyclic graphs”, which is a specific type of graph which allows for validation of certain properties. For simplicity the details are described here:</p>
<p>“Directed” - connections between nodes go in a particular direction and can but are not necessarily bi-directional
“Acyclic” - there are no sequences of connections in the graph which would allow a “cycle”, or a chain that loops infinitely.</p>
<p>Directed and Acyclic graphs are both long-standing mathematical descriptions and have a plethora of algorithms available for managing them.</p>
<p>In terms of the mathematical description, “nodes” can also be referred to as “vertices”, but in this specific case we call them “Blocks” to avoid confusion with the <code>Node</code> types in Godot.</p>
<h3 id="Event_Systems"><a class="zola-anchor" href="#Event_Systems" aria-label="Anchor link for: Event_Systems">Event Systems</a></h3>
<p>Each <code>Event</code> is a sequence of operations. A specific type of connection called the <code>Event Connection</code> is connected across the graph to determine the flow of logic. Other connections are of a value type, called <code>Value Connection</code>. Internally, these are an <code>enum Connection</code> which allows every connection to be one of each type, not both, and not nothing(<code>null</code>).</p>
<h4 id="Event_Connection"><a class="zola-anchor" href="#Event_Connection" aria-label="Anchor link for: Event_Connection"><code>Event Connection</code></a></h4>
<p>Event Connections work through a push system. Once the block emitting the event connection completes execution, the event connections which are marked as active are used to find the next Block(s) in the event graph.</p>
<h4 id="Value_Connection"><a class="zola-anchor" href="#Value_Connection" aria-label="Anchor link for: Value_Connection"><code>Value Connection</code></a></h4>
<p>Value connections work through a pull system. When a block is triggered to execute, it checks in memory for the input data. If any receiving port has stale (<code>null</code>) data, it first triggers the emitting block to regenerate that data, this can trigger recursively if necessary.</p>
<h3 id="Block_Definitions"><a class="zola-anchor" href="#Block_Definitions" aria-label="Anchor link for: Block_Definitions">Block Definitions</a></h3>
<p>Blocks can be defined in a variety of ways depending on the source of their creation.</p>
<p>All block definitions require a data segment and a logic segment as follows:</p>
<ul>
<li>Name (String)</li>
<li>Documentation (String) (Optional)</li>
<li>Inputs (Array&lt;Connection&gt;)</li>
<li>Outputs (Array&lt;Connection&gt;)</li>
<li>Execution Function (sig: <code>fn(Vec&lt;Connection&gt;) -&gt; Vec&lt;Connection&gt;</code>)</li>
<li>Input Icons (Array&lt;String&gt;)</li>
<li>Output Icons (Array&lt;String&gt;)</li>
</ul>
<h3 id="Core_Library"><a class="zola-anchor" href="#Core_Library" aria-label="Anchor link for: Core_Library">Core Library</a></h3>
<p>The Core Library, or the collection of Block Definitions made available by Choreographer itself, are all namespaced to “core”. These block definitions are the basic units of logic for Choreographer and are registered internally by defining them as rust structs that implement the <code>IBlock</code> trait and submitting them to the <code>ChoreographerServer</code> registry.</p>
<h3 id="Third_Party_Libraries"><a class="zola-anchor" href="#Third_Party_Libraries" aria-label="Anchor link for: Third_Party_Libraries">Third Party Libraries</a></h3>
<p>Third Party Libraries are collections of blocks registered by some means besides Choreographer. This is the intended way to add specificity to Choreographer.</p>
<p>While it is potentially possible to define and register these block definitions through an additional GDExtension project, it is recommended to write custom block definitions in GDScript and register them through a plugin.</p>
<p>The reasoning behind this is that I am not entirely certain how to use Choreographer as a library for type definitions without simply appending it to the project as a dependency, which could potentially cause problems with FFI. Should someone smarter than me know how this part of GDExtension/FFI works and is able to help with this side, registering custom blocks through GDExtension could become possible. However, please remember that the end user will require a binary for every platform they may want to publish their game on, and as such the number of GDExtension libraries in their project will exponentially increase the difficulty of exporting if those libraries are not pre-compiled for the user’s target platforms (Think Mobile and Apple platforms, which are tricky).</p>
<h4 id="How_Third_Party_Block_Definitions_work_internally"><a class="zola-anchor" href="#How_Third_Party_Block_Definitions_work_internally" aria-label="Anchor link for: How_Third_Party_Block_Definitions_work_internally">How Third Party Block Definitions work internally</a></h4>
<p>Internally, there is a “CustomBlock” block definition which redirects standard <code>IBlock</code> function calls to a series of <code>Callable</code>s point at particular function names.</p>
<blockquote>
<p>In the future, when abstract method definitions become available, I want this to be refactored to use abstract methods instead, which should ease the pain of development</p>
</blockquote>
<p>The method of storage for these callables should be <code>Option&lt;Callable&gt;</code> such that when encountering a value of <code>None</code>, we can emit a warning message and skip processing.</p>
<h2 id="Virtual_Heap_Memory"><a class="zola-anchor" href="#Virtual_Heap_Memory" aria-label="Anchor link for: Virtual_Heap_Memory">Virtual Heap Memory</a></h2>
<p>Choreographer uses a heap memory abstraction. That is, a <code>Vec&lt;Option&lt;Variant&gt;&gt;</code> which allows indices to serve as a memory address and value checking on the rust-side of things.</p>
<p>The organization of the heap is as such:</p>
<ol>
<li>Script local variables (effectively static as variables cannot be de-initialized until the script itself is dropped)</li>
<li>Temporary Event execution memory (dropped upon event completion)</li>
</ol>
<ul>
<li>An option available to the user could be to choose between memory usage and performance. For example, to save performance costs, the memory heap could simply be nulled (<code>None</code>) out rather than resizing the <code>Vec</code>. But this could create a memory cost as each execution unit increases the size of the nothing array. The immediate deletion would remove need for some kind of garbage collection system, which I see as a band-aid for bad memory management.</li>
</ul>
<p>Each script is in charge of its own virtual heap memory.</p>
<blockquote>
<p>Note, though it is referred to as “virtual” the data being stored is also literally in the program’s heap memory. But by virtualizing it the scripts create an effective memory arena such that the entire block of memory can be dropped all at once when the script instance is dropped.</p>
</blockquote>
<h3 id="How_do_individual_blocks_interact_with_the_virtual_heap?"><a class="zola-anchor" href="#How_do_individual_blocks_interact_with_the_virtual_heap?" aria-label="Anchor link for: How_do_individual_blocks_interact_with_the_virtual_heap?">How do individual blocks interact with the virtual heap?</a></h3>
<p>The script execution maps inputs and outputs to virtual heap addresses (<code>usize</code> value) such that when an output is calculated it is assigned to the address that inputs requiring that value are also targeting. A value goes stale once there are no remaining inputs that target that address, and as such can be dropped.</p>
<p>It is possible to develop a system by which stale memory is detected throughout the execution of an event graph, this would certainly increase the efficiency of larger event graphs, however this may be difficult to implement based on a variety of factors. Testing will be needed.</p>
<h2 id="Choreographer_Scripting_Interface_(CSI)"><a class="zola-anchor" href="#Choreographer_Scripting_Interface_(CSI)" aria-label="Anchor link for: Choreographer_Scripting_Interface_(CSI)">Choreographer Scripting Interface (CSI)</a></h2>
<p>The CSI is a visual representation of the data model contained in memory and in the corresponding <code>.c11r</code> file. Hence, the reasonable approach towards developing the CSI is to use the Model-View-Controller system.</p>
<p>The CSI is effectively the View and Controller as the Model is the only component required for execution at runtime. CSI displays a graph of blocks using Godot’s <code>GraphEdit</code> systems. And all changes are marshalled out to the controller component which in turn serializes changes in data.</p>
<h3 id="The_.c11r_format"><a class="zola-anchor" href="#The_.c11r_format" aria-label="Anchor link for: The_.c11r_format">The <code>.c11r</code> format</a></h3>
<p>Choreographer Script files use the <code>c11r</code> extension and are in the well tested XML file format. The logic behind using XML is that it allows attributes to be appended onto a tag, which allows for a more detailed description of individual objects without necessitating deep nesting like JSON would require. Additionally, as HTML is a superset of XML, those familiar with web development should be able to easily read <code>c11r</code> files with minimal effort.</p>
<h4 id="Example_.c11r_data/schema"><a class="zola-anchor" href="#Example_.c11r_data&#x2F;schema" aria-label="Anchor link for: Example_.c11r_data&#x2F;schema">Example <code>.c11r</code> data/schema</a></h4>
<pre data-lang="xml" style="background-color:#2b303b;color:#c0c5ce;" class="language-xml "><code class="language-xml" data-lang="xml"><span>&lt;?</span><span style="color:#bf616a;">xml </span><span style="color:#d08770;">version</span><span>=&quot;</span><span style="color:#a3be8c;">1.0</span><span>&quot;?&gt;
</span><span>&lt;</span><span style="color:#bf616a;">c11r</span><span>&gt;
</span><span>    &lt;</span><span style="color:#bf616a;">godot </span><span style="color:#d08770;">uid</span><span>=&quot;</span><span style="color:#a3be8c;">02123</span><span>&quot;&gt;&lt;/</span><span style="color:#bf616a;">godot</span><span>&gt;
</span><span>    &lt;</span><span style="color:#bf616a;">dependencies</span><span>&gt;
</span><span>        &lt;</span><span style="color:#bf616a;">res </span><span style="color:#d08770;">guid</span><span>=&quot;</span><span style="color:#a3be8c;">02165</span><span>&quot; </span><span style="color:#d08770;">path</span><span>=&quot;</span><span style="color:#a3be8c;">res://asdaslkhjasd</span><span>&quot;&gt;&lt;/</span><span style="color:#bf616a;">res</span><span>&gt;
</span><span>    &lt;/</span><span style="color:#bf616a;">dependencies</span><span>&gt;
</span><span>    &lt;</span><span style="color:#bf616a;">vars</span><span>&gt;
</span><span>        &lt;</span><span style="color:#bf616a;">item </span><span style="color:#d08770;">type</span><span>=&quot;</span><span style="color:#a3be8c;">0</span><span>&quot; </span><span style="color:#d08770;">name</span><span>=&quot;</span><span style="color:#a3be8c;">some_var</span><span>&quot; </span><span style="color:#d08770;">value</span><span>=&quot;</span><span style="color:#a3be8c;">12</span><span>&quot; </span><span style="color:#d08770;">isconst</span><span>=&quot;</span><span style="color:#a3be8c;">false</span><span>&quot;&gt;&lt;/</span><span style="color:#bf616a;">item</span><span>&gt;
</span><span>        &lt;</span><span style="color:#bf616a;">item </span><span style="color:#d08770;">type</span><span>=&quot;</span><span style="color:#a3be8c;">12</span><span>&quot; </span><span style="color:#d08770;">name</span><span>=&quot;</span><span style="color:#a3be8c;">another_var</span><span>&quot; </span><span style="color:#d08770;">value</span><span>=&quot;</span><span style="color:#a3be8c;">something</span><span>&quot; </span><span style="color:#d08770;">isconst</span><span>=&quot;</span><span style="color:#a3be8c;">false</span><span>&quot;&gt;&lt;/</span><span style="color:#bf616a;">item</span><span>&gt;
</span><span>    &lt;/</span><span style="color:#bf616a;">vars</span><span>&gt;
</span><span>    &lt;</span><span style="color:#bf616a;">blocks</span><span>&gt;
</span><span>        &lt;</span><span style="color:#bf616a;">block </span><span style="color:#d08770;">id</span><span>=&quot;</span><span style="color:#a3be8c;">0001</span><span>&quot; </span><span style="color:#d08770;">type</span><span>=&quot;</span><span style="color:#a3be8c;">IfElse</span><span>&quot;&gt;&lt;/</span><span style="color:#bf616a;">block</span><span>&gt;
</span><span>    &lt;/</span><span style="color:#bf616a;">blocks</span><span>&gt;
</span><span>    &lt;</span><span style="color:#bf616a;">connections</span><span>&gt;
</span><span>        &lt;</span><span style="color:#bf616a;">link </span><span style="color:#d08770;">left_id</span><span>=&quot;</span><span style="color:#a3be8c;">0001</span><span>&quot; </span><span style="color:#d08770;">left_port</span><span>=&quot;</span><span style="color:#a3be8c;">0</span><span>&quot; </span><span style="color:#d08770;">right_id</span><span>=&quot;</span><span style="color:#a3be8c;">0002</span><span>&quot; </span><span style="color:#d08770;">right_port</span><span>=&quot;</span><span style="color:#a3be8c;">0</span><span>&quot;&gt;&lt;/</span><span style="color:#bf616a;">link</span><span>&gt;
</span><span>    &lt;/</span><span style="color:#bf616a;">connections</span><span>&gt;
</span><span>    &lt;</span><span style="color:#bf616a;">metadata</span><span>&gt;
</span><span>        &lt;</span><span style="color:#bf616a;">doc </span><span style="color:#d08770;">id</span><span>=&quot;</span><span style="color:#a3be8c;">0001</span><span>&quot;&gt;
</span><span>            This is a docstring
</span><span>        &lt;/</span><span style="color:#bf616a;">doc</span><span>&gt;
</span><span>        &lt;</span><span style="color:#bf616a;">gui </span><span style="color:#d08770;">id</span><span>=&quot;</span><span style="color:#a3be8c;">0001</span><span>&quot; </span><span style="color:#d08770;">pos</span><span>=&quot;</span><span style="color:#a3be8c;">1.2;3.6</span><span>&quot;&gt;&lt;/</span><span style="color:#bf616a;">gui</span><span>&gt;
</span><span>        &lt;</span><span style="color:#bf616a;">comment </span><span style="color:#d08770;">id</span><span>=&quot;</span><span style="color:#a3be8c;">0001</span><span>&quot; </span><span style="color:#d08770;">pos</span><span>=&quot;</span><span style="color:#a3be8c;">1.2;1.0</span><span>&quot;&gt;
</span><span>            This is a comment block
</span><span>        &lt;/</span><span style="color:#bf616a;">comment</span><span>&gt;
</span><span>    &lt;/</span><span style="color:#bf616a;">metadata</span><span>&gt;
</span><span>&lt;/</span><span style="color:#bf616a;">c11r</span><span>&gt;
</span></code></pre>
<h2 id="Testing_Challenges"><a class="zola-anchor" href="#Testing_Challenges" aria-label="Anchor link for: Testing_Challenges">Testing Challenges</a></h2>
<p>Unit testing is incredibly helpful for verifying that functions operate as intended when changes are made. Unfortunately for godot-rust, the actual components that interoperate with Godot’s types cannot be used because the definitions are only known when Godot loads the library into memory and initializes it over FFI. What this means is that <em><strong>no component that uses Godot types can be unit tested without a very specific setup</strong></em>. There are currently tools and attempts to create a custom testing environment for godot-rust, however as of now I believe the most effective way to test a godot-rust project is to extract what logic is possible away from the Godot Types. For example the serialization/deserialization systems are based on a submodule that emits and receives structured metadata rather than a Godot type. This allows these systems to be unit tested.</p>
<h2 id="Continuation_of_documentation"><a class="zola-anchor" href="#Continuation_of_documentation" aria-label="Anchor link for: Continuation_of_documentation">Continuation of documentation</a></h2>
<p>This here is all I can think of that should be included at this present moment. Unfortunately I am a mortal and am prone to mistakes, so please let me know if something needs to be changed and/or updated by creating an issue in the repository.</p>

  </article>
</div>

<div class="flex justify-center py-2">
  
  <ul class="menu menu-vertical lg:menu-horizontal bg-secondary text-neutral rounded-box">
    <li class="menu-title text-neutral">Read more with tag:</li>
    
    <li class="bg-secondary hover:bg-primary rounded-box">
      <a href="https://queenofsquiggles.github.io/tags/godot/">
        godot
      </a>
    </li>
    
    <li class="bg-secondary hover:bg-primary rounded-box">
      <a href="https://queenofsquiggles.github.io/tags/reference/">
        reference
      </a>
    </li>
    
  </ul>
  

</div>


  </main>

  
  

  
  <footer class="footer bg-neutral text-neutral-content p-10 justify-center">
    <aside>
      
      <a href=" mailto:thequeenofsquiggles@gmail.com">thequeenofsquiggles@gmail.com</a>
      
    </aside>
    
    <nav>
      <h6 class="footer-title">Socials</h6>
      <div class="grid grid-flow-col gap-4">
        
        <a class="flex-auto" href="https:&#x2F;&#x2F;blobfox.coffee&#x2F;@queenofsquiggles"  title="Mastodon" ><i
            class="fab fa-mastodon"></i></a>
        
        <a class="flex-auto" href="rss.xml"  title="RSS Feed" ><i
            class="fas fa-rss"></i></a>
        
      </div>
    </nav>
    
  </footer>
  
</body>

</html>